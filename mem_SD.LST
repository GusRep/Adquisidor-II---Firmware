A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     1


MACRO ASSEMBLER A51 V7.04a
OBJECT MODULE PLACED IN mem_SD.OBJ
ASSEMBLER INVOKED BY: C:\SiLabs\MCU\IDEfiles\C51\BIN\a51.exe mem_SD.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1     ;------------------------------------
                       2     ;-  Generated Initialization File  --
                       3     ;------------------------------------
                       4     
                       5     ;$include (C8051F340.inc)
                +1     6     ;------------------------------------------------------------------------------
                +1     7     ; C8051F340.INC
                +1     8     ;------------------------------------------------------------------------------
                +1     9     ; Copyright 2005 Silicon Laboratories, Inc.
                +1    10     ; http://www.silabs.com
                +1    11     ;
                +1    12     ; Program Description:
                +1    13     ;
                +1    14     ; Register/bit definitions for the C8051F34x family.
                +1    15     ;
                +1    16     ;
                +1    17     ; FID:            34X000003
                +1    18     ; Target:         C8051F340, 'F341, 'F342, 'F343, 'F344, 'F345, 'F346, 'F347
                +1    19     ; Tool chain:     Keil
                +1    20     ; Command Line:   None
                +1    21     ;
                +1    22     ; Release 1.0
                +1    23     ;    -Initial Revision (GP\PKC)
                +1    24     ;    -13 DEC 2005
                +1    25     ;
                +1    26     
                +1    27     ;------------------------------------------------------------------------------
                +1    28     ; Byte Registers
                +1    29     ;------------------------------------------------------------------------------
                +1    30     
  0080          +1    31     P0        DATA  080H                   ; Port 0 Latch
  0081          +1    32     SP        DATA  081H                   ; Stack Pointer
  0082          +1    33     DPL       DATA  082H                   ; Data Pointer Low
  0083          +1    34     DPH       DATA  083H                   ; Data Pointer High
  0084          +1    35     EMI0TC    DATA  084H                   ; External Memory Interface Timing
  0085          +1    36     EMI0CF    DATA  085H                   ; External Memory Interface Config
  0086          +1    37     OSCLCN    DATA  086H                   ; Internal Low-Freq Oscillator Control
  0087          +1    38     PCON      DATA  087H                   ; Power Control
  0088          +1    39     TCON      DATA  088H                   ; Timer/Counter Control
  0089          +1    40     TMOD      DATA  089H                   ; Timer/Counter Mode
  008A          +1    41     TL0       DATA  08AH                   ; Timer/Counter 0 Low
  008B          +1    42     TL1       DATA  08BH                   ; Timer/Counter 1 Low
  008C          +1    43     TH0       DATA  08CH                   ; Timer/Counter 0 High
  008D          +1    44     TH1       DATA  08DH                   ; Timer/Counter 1 High
  008E          +1    45     CKCON     DATA  08EH                   ; Clock Control
  008F          +1    46     PSCTL     DATA  08FH                   ; Program Store R/W Control
  0090          +1    47     P1        DATA  090H                   ; Port 1 Latch
  0091          +1    48     TMR3CN    DATA  091H                   ; Timer/Counter 3Control
  0092          +1    49     TMR3RLL   DATA  092H                   ; Timer/Counter 3 Reload Low
  0093          +1    50     TMR3RLH   DATA  093H                   ; Timer/Counter 3 Reload High
  0094          +1    51     TMR3L     DATA  094H                   ; Timer/Counter 3Low
  0095          +1    52     TMR3H     DATA  095H                   ; Timer/Counter 3 High
  0096          +1    53     USB0ADR   DATA  096H                   ; USB0 Indirect Address Register
  0097          +1    54     USB0DAT   DATA  097H                   ; USB0 Data Register
  0098          +1    55     SCON0     DATA  098H                   ; UART0 Control
  0099          +1    56     SBUF0     DATA  099H                   ; UART0 Data Buffer
  009A          +1    57     CPT1CN    DATA  09AH                   ; Comparator1 Control
  009B          +1    58     CPT0CN    DATA  09BH                   ; Comparator0 Control
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     2

  009C          +1    59     CPT1MD    DATA  09CH                   ; Comparator1 Mode Selection
  009D          +1    60     CPT0MD    DATA  09DH                   ; Comparator0 Mode Selection
  009E          +1    61     CPT1MX    DATA  09EH                   ; Comparator1 MUX Selection
  009F          +1    62     CPT0MX    DATA  09FH                   ; Comparator0 MUX Selection
  00A0          +1    63     P2        DATA  0A0H                   ; Port 2 Latch
  00A1          +1    64     SPI0CFG   DATA  0A1H                   ; SPI Configuration
  00A2          +1    65     SPI0CKR   DATA  0A2H                   ; SPI Clock Rate Control
  00A3          +1    66     SPI0DAT   DATA  0A3H                   ; SPI Data
  00A4          +1    67     P0MDOUT   DATA  0A4H                   ; Port 0 Output Mode Configuration
  00A5          +1    68     P1MDOUT   DATA  0A5H                   ; Port 1 Output Mode Configuration
  00A6          +1    69     P2MDOUT   DATA  0A6H                   ; Port 2 Output Mode Configuration
  00A7          +1    70     P3MDOUT   DATA  0A7H                   ; Port 3 Output Mode Configuration
  00A8          +1    71     IE        DATA  0A8H                   ; Interrupt Enable
  00A9          +1    72     CLKSEL    DATA  0A9H                   ; Clock Select
  00AA          +1    73     EMI0CN    DATA  0AAH                   ; External Memory Interface Control
  00AC          +1    74     SBCON1    DATA  0ACH                   ; UART1 Baud Rate Generator Control
  00AE          +1    75     P4MDOUT   DATA  0AEH                   ; Port 4 Output Mode Configuration
  00AF          +1    76     PFE0CN    DATA  0AFH                   ; Prefetch Engine Control
  00B0          +1    77     P3        DATA  0B0H                   ; Port 3 Latch
  00B1          +1    78     OSCXCN    DATA  0B1H                   ; External Oscillator Control
  00B2          +1    79     OSCICN    DATA  0B2H                   ; Internal Oscillator Control
  00B3          +1    80     OSCICL    DATA  0B3H                   ; Internal Oscillator Calibration
  00B4          +1    81     SBRLL1    DATA  0B4H                   ; UART1 Baud Rate Generator Low
  00B5          +1    82     SBRLH1    DATA  0B5H                   ; UART1 Baud Rate Generator High
  00B6          +1    83     FLSCL     DATA  0B6H                   ; Flash Scale
  00B7          +1    84     FLKEY     DATA  0B7H                   ; Flash Lock and Key
  00B8          +1    85     IP        DATA  0B8H                   ; Interrupt Priority
  00B9          +1    86     CLKMUL    DATA  0B9H                   ; Clock Multiplier
  00BA          +1    87     AMX0N     DATA  0BAH                   ; AMUX0 Negative Channel Select
  00BB          +1    88     AMX0P     DATA  0BBH                   ; AMUX0 Positive Channel Select
  00BC          +1    89     ADC0CF    DATA  0BCH                   ; ADC0 Configuration
  00BD          +1    90     ADC0L     DATA  0BDH                   ; ADC0 Low
  00BE          +1    91     ADC0H     DATA  0BEH                   ; ADC0 High
  00C0          +1    92     SMB0CN    DATA  0C0H                   ; SMBus Control
  00C1          +1    93     SMB0CF    DATA  0C1H                   ; SMBus Configuration
  00C2          +1    94     SMB0DAT   DATA  0C2H                   ; SMBus Data
  00C3          +1    95     ADC0GTL   DATA  0C3H                   ; ADC0 Greater-Than Compare Low
  00C4          +1    96     ADC0GTH   DATA  0C4H                   ; ADC0 Greater-Than Compare High
  00C5          +1    97     ADC0LTL   DATA  0C5H                   ; ADC0 Less-Than Compare Word Low
  00C6          +1    98     ADC0LTH   DATA  0C6H                   ; ADC0 Less-Than Compare Word High
  00C7          +1    99     P4        DATA  0C7H                   ; Port 4 Latch
  00C8          +1   100     TMR2CN    DATA  0C8H                   ; Timer/Counter 2 Control
  00C9          +1   101     REG0CN    DATA  0C9H                   ; Voltage Regulator Control
  00CA          +1   102     TMR2RLL   DATA  0CAH                   ; Timer/Counter 2 Reload Low
  00CB          +1   103     TMR2RLH   DATA  0CBH                   ; Timer/Counter 2 Reload High
  00CC          +1   104     TMR2L     DATA  0CCH                   ; Timer/Counter 2 Low
  00CD          +1   105     TMR2H     DATA  0CDH                   ; Timer/Counter 2 High
  00D0          +1   106     PSW       DATA  0D0H                   ; Program Status Word
  00D1          +1   107     REF0CN    DATA  0D1H                   ; Voltage Reference Control
  00D2          +1   108     SCON1     DATA  0D2H                   ; UART1 Control
  00D3          +1   109     SBUF1     DATA  0D3H                   ; UART1 Data Buffer
  00D4          +1   110     P0SKIP    DATA  0D4H                   ; Port 0 Skip
  00D5          +1   111     P1SKIP    DATA  0D5H                   ; Port 1 Skip
  00D6          +1   112     P2SKIP    DATA  0D6H                   ; Port 2 Skip
  00D7          +1   113     USB0XCN   DATA  0D7H                   ; USB0 Transceiver Control
  00D8          +1   114     PCA0CN    DATA  0D8H                   ; PCA Control
  00D9          +1   115     PCA0MD    DATA  0D9H                   ; PCA Mode
  00DA          +1   116     PCA0CPM0  DATA  0DAH                   ; PCA Module 0 Mode Register
  00DB          +1   117     PCA0CPM1  DATA  0DBH                   ; PCA Module 1 Mode Register
  00DC          +1   118     PCA0CPM2  DATA  0DCH                   ; PCA Module 2 Mode Register
  00DD          +1   119     PCA0CPM3  DATA  0DDH                   ; PCA Module 3 Mode Register
  00DE          +1   120     PCA0CPM4  DATA  0DEH                   ; PCA Module 4 Mode Register
  00DF          +1   121     P3SKIP    DATA  0DFH                   ; Port 3Skip
  00E0          +1   122     ACC       DATA  0E0H                   ; Accumulator
  00E1          +1   123     XBR0      DATA  0E1H                   ; Port I/O Crossbar Control 0
  00E2          +1   124     XBR1      DATA  0E2H                   ; Port I/O Crossbar Control 1
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     3

  00E3          +1   125     XBR2      DATA  0E3H                   ; Port I/O Crossbar Control 2
  00E4          +1   126     IT01CF    DATA  0E4H                   ; INT0/INT1 Configuration
  00E5          +1   127     SMOD1     DATA  0E5H                   ; UART1 Mode
  00E6          +1   128     EIE1      DATA  0E6H                   ; Extended Interrupt Enable 1
  00E7          +1   129     EIE2      DATA  0E7H                   ; Extended Interrupt Enable 2
  00E8          +1   130     ADC0CN    DATA  0E8H                   ; ADC0 Control
  00E9          +1   131     PCA0CPL1  DATA  0E9H                   ; PCA Capture 1 Low
  00EA          +1   132     PCA0CPH1  DATA  0EAH                   ; PCA Capture 1 High
  00EB          +1   133     PCA0CPL2  DATA  0EBH                   ; PCA Capture 2 Low
  00EC          +1   134     PCA0CPH2  DATA  0ECH                   ; PCA Capture 2 High
  00ED          +1   135     PCA0CPL3  DATA  0EDH                   ; PCA Capture 3 Low
  00EE          +1   136     PCA0CPH3  DATA  0EEH                   ; PCA Capture 3High
  00EF          +1   137     RSTSRC    DATA  0EFH                   ; Reset Source Configuration/Status
  00F0          +1   138     B         DATA  0F0H                   ; B Register
  00F1          +1   139     P0MDIN    DATA  0F1H                   ; Port 0 Input Mode Configuration
  00F2          +1   140     P1MDIN    DATA  0F2H                   ; Port 1 Input Mode Configuration
  00F3          +1   141     P2MDIN    DATA  0F3H                   ; Port 2 Input Mode Configuration
  00F4          +1   142     P3MDIN    DATA  0F4H                   ; Port 3 Input Mode Configuration
  00F5          +1   143     P4MDIN    DATA  0F5H                   ; Port 4 Input Mode Configuration
  00F6          +1   144     EIP1      DATA  0F6H                   ; Extended Interrupt Priority 1
  00F7          +1   145     EIP2      DATA  0F7H                   ; Extended Interrupt Priority 2
  00F8          +1   146     SPI0CN    DATA  0F8H                   ; SPI Control
  00F9          +1   147     PCA0L     DATA  0F9H                   ; PCA Counter Low
  00FA          +1   148     PCA0H     DATA  0FAH                   ; PCA Counter High
  00FB          +1   149     PCA0CPL0  DATA  0FBH                   ; PCA Capture 0 Low
  00FC          +1   150     PCA0CPH0  DATA  0FCH                   ; PCA Capture 0 High
  00FD          +1   151     PCA0CPL4  DATA  0FDH                   ; PCA Capture 4 Low
  00FE          +1   152     PCA0CPH4  DATA  0FEH                   ; PCA Capture 4 High
  00FF          +1   153     VDM0CN    DATA  0FFH                   ; VDD Monitor Control
                +1   154     
                +1   155     ;------------------------------------------------------------------------------
                +1   156     ; Bit Definitions
                +1   157     ;------------------------------------------------------------------------------
                +1   158     
                +1   159     ; TCON  088H
  008F          +1   160     TF1     BIT     TCON.7                 ; Timer1 overflow flag
  008E          +1   161     TR1     BIT     TCON.6                 ; Timer1 on/off control
  008D          +1   162     TF0     BIT     TCON.5                 ; Timer0 overflow flag
  008C          +1   163     TR0     BIT     TCON.4                 ; Timer0 on/off control
  008B          +1   164     IE1     BIT     TCON.3                 ; Ext. Interrupt 1 edge flag
  008A          +1   165     IT1     BIT     TCON.2                 ; Ext. Interrupt 1 type
  0089          +1   166     IE0     BIT     TCON.1                 ; Ext. Interrupt 0 edge flag
  0088          +1   167     IT0     BIT     TCON.0                 ; Ext. Interrupt 0 type
                +1   168     
                +1   169     ; SCON0  098H
  009F          +1   170     S0MODE  BIT     SCON0.7                ; Serial mode control bit 0
                +1   171                                            ; Bit 6 unused
  009D          +1   172     MCE0    BIT     SCON0.5                ; Multiprocessor communication enable
  009C          +1   173     REN0    BIT     SCON0.4                ; Receive enable
  009B          +1   174     TB80    BIT     SCON0.3                ; Transmit bit 8
  009A          +1   175     RB80    BIT     SCON0.2                ; Receive bit 8
  0099          +1   176     TI0     BIT     SCON0.1                ; Transmit interrupt flag
  0098          +1   177     RI0     BIT     SCON0.0                ; Receive interrupt flag
                +1   178     
                +1   179     ; IE  0A8H
  00AF          +1   180     EA      BIT     IE.7                   ; Global interrupt enable
  00AE          +1   181     ESPI0   BIT     IE.6                   ; Bit 6 unused
  00AD          +1   182     ET2     BIT     IE.5                   ; Bit 5 unused
  00AC          +1   183     ES0     BIT     IE.4                   ; UART0 interrupt enable
  00AB          +1   184     ET1     BIT     IE.3                   ; Timer1 interrupt enable
  00AA          +1   185     EX1     BIT     IE.2                   ; External interrupt 1 enable
  00A9          +1   186     ET0     BIT     IE.1                   ; Timer0 interrupt enable
  00A8          +1   187     EX0     BIT     IE.0                   ; External interrupt 0 enable
                +1   188     
                +1   189     ; IP  0B8H
                +1   190                                            ; Bit 7 unused
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     4

  00BE          +1   191     PSPI0   BIT     IP.6                   ; SPI0 interrupt priority
  00BD          +1   192     PT2     BIT     IP.5                   ; Timer2 priority
  00BC          +1   193     PS0     BIT     IP.4                   ; UART0 priority
  00BB          +1   194     PT1     BIT     IP.3                   ; Timer1 priority
  00BA          +1   195     PX1     BIT     IP.2                   ; External interrupt 1 priority
  00B9          +1   196     PT0     BIT     IP.1                   ; Timer0 priority
  00B8          +1   197     PX0     BIT     IP.0                   ; External interrupt 0 priority
                +1   198     
                +1   199     ; SMB0CN  0C0H
  00C7          +1   200     MASTER  BIT     SMB0CN.7               ; Master/slave indicator
  00C6          +1   201     TXMODE  BIT     SMB0CN.6               ; Transmit mode indicator
  00C5          +1   202     STA     BIT     SMB0CN.5               ; Start flag
  00C4          +1   203     STO     BIT     SMB0CN.4               ; Stop flag
  00C3          +1   204     ACKRQ   BIT     SMB0CN.3               ; Acknowledge request
  00C2          +1   205     ARBLOST BIT     SMB0CN.2               ; Arbitration lost indicator
  00C1          +1   206     ACK     BIT     SMB0CN.1               ; Acknowledge flag
  00C0          +1   207     SI      BIT     SMB0CN.0               ; SMBus interrupt flag
                +1   208     
                +1   209     ; TMR2CN  0C8H
  00CF          +1   210     TF2H    BIT     TMR2CN.7               ; Timer2 high byte overflow flag
  00CE          +1   211     TF2L    BIT     TMR2CN.6               ; Timer2 low byte overflow flag
  00CD          +1   212     TF2LEN  BIT     TMR2CN.5               ; Timer2 low byte interrupt enable
  00CC          +1   213     T2CE    BIT     TMR2CN.4               ; Timer2 capture enable
  00CB          +1   214     T2SPLIT BIT     TMR2CN.3               ; Timer2 split mode enable
  00CA          +1   215     TR2     BIT     TMR2CN.2               ; Timer2 on/off control
  00C9          +1   216     T2CSS   BIT     TMR2CN.1               ; Timer 2 Capture Source select
  00C8          +1   217     T2XCLK  BIT     TMR2CN.0               ; Timer2 external clock select
                +1   218     
                +1   219     ; PSW  0D0H
  00D7          +1   220     CY      BIT     PSW.7                  ; Carry flag
  00D6          +1   221     AC      BIT     PSW.6                  ; Auxiliary carry flag
  00D5          +1   222     F0      BIT     PSW.5                  ; User flag 0
  00D4          +1   223     RS1     BIT     PSW.4                  ; Register bank select 1
  00D3          +1   224     RS0     BIT     PSW.3                  ; Register bank select 0
  00D2          +1   225     OV      BIT     PSW.2                  ; Overflow flag
  00D1          +1   226     F1      BIT     PSW.1                  ; User flag 1
  00D0          +1   227     P       BIT     PSW.0                  ; Accumulator parity flag
                +1   228     
                +1   229     ; PCA0CN  0D8H
  00DF          +1   230     CF      BIT     PCA0CN.7               ; PCA0 counter overflow flag
  00DE          +1   231     CR      BIT     PCA0CN.6               ; PCA0 counter run control
                +1   232                                            ; Bit5 UNUSED
  00DC          +1   233     CCF4    BIT     PCA0CN.4               ; PCA0 module4 capture/compare flag
  00DB          +1   234     CCF3    BIT     PCA0CN.3               ; PCA0 module3 capture/compare flag
  00DA          +1   235     CCF2    BIT     PCA0CN.2               ; PCA0 module2 capture/compare flag
  00D9          +1   236     CCF1    BIT     PCA0CN.1               ; PCA0 module1 capture/compare flag
  00D8          +1   237     CCF0    BIT     PCA0CN.0               ; PCA0 module0 capture/compare flag
                +1   238     
                +1   239     ; ADC0CN  0E8H
  00EF          +1   240     AD0EN   BIT     ADC0CN.7               ; ADC0 enable
  00EE          +1   241     AD0TM   BIT     ADC0CN.6               ; ADC0 track mode
  00ED          +1   242     AD0INT  BIT     ADC0CN.5               ; ADC0 converision complete interrupt flag
  00EC          +1   243     AD0BUSY BIT     ADC0CN.4               ; ADC0 busy flag
  00EB          +1   244     AD0WINT BIT     ADC0CN.3               ; ADC0 window compare interrupt flag
  00EA          +1   245     AD0CM2  BIT     ADC0CN.2               ; ADC0 conversion mode select 2
  00E9          +1   246     AD0CM1  BIT     ADC0CN.1               ; ADC0 conversion mode select 1
  00E8          +1   247     AD0CM0  BIT     ADC0CN.0               ; ADC0 conversion mode select 0
                +1   248     
                +1   249     ; SPI0CN  0F8H
  00FF          +1   250     SPIF    BIT     SPI0CN.7               ; SPI0 interrupt flag
  00FE          +1   251     WCOL    BIT     SPI0CN.6               ; SPI0 write collision flag
  00FD          +1   252     MODF    BIT     SPI0CN.5               ; SPI0 mode fault flag
  00FC          +1   253     RXOVRN  BIT     SPI0CN.4               ; SPI0 rx overrun flag
  00FB          +1   254     NSSMD1  BIT     SPI0CN.3               ; SPI0 slave select mode 1
  00FA          +1   255     NSSMD0  BIT     SPI0CN.2               ; SPI0 slave select mode 0
  00F9          +1   256     TXBMT   BIT     SPI0CN.1               ; SPI0 transmit buffer empty
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     5

  00F8          +1   257     SPIEN   BIT     SPI0CN.0               ; SPI0 SPI enable
                +1   258     
                +1   259     ;------------------------------------------------------------------------------
                +1   260     ; End Of File
                +1   261     ;------------------------------------------------------------------------------
                     262     
                     263     
0000                 264     Org             000h
0000 2100            265     ajmp    inicio
                     266     
                     267     
                     268     ; Peripheral specific initialization functions,
                     269     ; Called from the Init_Device label
                     270     
0100                 271     org 100h
                     272     
0100                 273     inicio:
0100                 274     SPI_Init:
0100 75A140          275         mov  SPI0CFG,   #040h
0103 75F801          276         mov  SPI0CN,    #001h
0106 75A210          277         mov  SPI0CKR,   #010h
                     278     
                     279     
                     280     
                     281         ; P0.0  -  SCK  (SPI0), Push-Pull,  Digital
                     282         ; P0.1  -  MISO (SPI0), Open-Drain, Digital
                     283         ; P0.2  -  MOSI (SPI0), Push-Pull,  Digital
                     284         ; P0.3  -  Unassigned,  Push-Pull,  Digital
                     285         ; P0.4  -  Unassigned,  Open-Drain, Digital
                     286         ; P0.5  -  Unassigned,  Open-Drain, Digital
                     287         ; P0.6  -  Unassigned,  Open-Drain, Digital
                     288         ; P0.7  -  Unassigned,  Open-Drain, Digital
                     289     
                     290         ; P1.0  -  Unassigned,  Open-Drain, Digital
                     291         ; P1.1  -  Unassigned,  Open-Drain, Digital
                     292         ; P1.2  -  Unassigned,  Open-Drain, Digital
                     293         ; P1.3  -  Unassigned,  Open-Drain, Digital
                     294         ; P0.3  -  Unassigned,  Open-Drain, Digital
                     295         ; P1.5  -  Unassigned,  Open-Drain, Digital
                     296         ; P1.6  -  Unassigned,  Open-Drain, Digital
                     297         ; P1.7  -  Unassigned,  Open-Drain, Digital
                     298     
                     299         ; P2.0  -  Unassigned,  Open-Drain, Digital
                     300         ; P2.1  -  Unassigned,  Open-Drain, Digital
                     301         ; P2.2  -  Unassigned,  Open-Drain, Digital
                     302         ; P2.3  -  Unassigned,  Open-Drain, Digital
                     303         ; P2.4  -  Unassigned,  Open-Drain, Digital
                     304         ; P2.5  -  Unassigned,  Open-Drain, Digital
                     305         ; P2.6  -  Unassigned,  Open-Drain, Digital
                     306         ; P2.7  -  Unassigned,  Open-Drain, Digital
                     307     
                     308         ; P3.0  -  Unassigned,  Open-Drain, Digital
                     309         ; P3.1  -  Unassigned,  Open-Drain, Digital
                     310         ; P3.2  -  Unassigned,  Open-Drain, Digital
                     311         ; P3.3  -  Unassigned,  Open-Drain, Digital
                     312         ; P3.4  -  Unassigned,  Open-Drain, Digital
                     313         ; P3.5  -  Unassigned,  Open-Drain, Digital
                     314         ; P3.6  -  Unassigned,  Open-Drain, Digital
                     315         ; P3.7  -  Unassigned,  Open-Drain, Digital
                     316     
0109 75A40D          317         mov  P0MDOUT,   #00Dh
010C 75E102          318         mov  XBR0,      #002h
010F 75E240          319         mov  XBR1,      #040h
                     320     
                     321     
0112                 322     Oscillator_Init:
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     6

0112 75B283          323         mov  OSCICN,    #083h
                     324     
0115                 325     PCA_Init:
0115 53D9BF          326         anl  PCA0MD,    #0BFh
0118 75D900          327         mov  PCA0MD,    #000h
                     328     
                     329     
                     330     
                     331     
                     332     
                     333     ;-----------------------------------------------------------------------------
                     334     ; PROGRAMA SPI
                     335     ;-----------------------------------------------------------------------------
                     336     
  007C               337     ADDR0 EQU 124 ;LSB of MMC memory address to write 
  007D               338     ADDR1 EQU 125 
  007E               339     ADDR2 EQU 126 
  007F               340     ADDR3 EQU 127 ;MSB of MMC memory address to write 
  0078               341     ERRORNUM EQU 120 ;error number 
                     342     
                     343     ;LLenado de memoria
011B 7800            344     mov r0,#00h
011D 790F            345     mov     r1,#0fh
011F 900000          346     mov dptr,#0000h
0122 7488            347     mov     A,#88h
0124                 348     itera:
0124 F0              349     movx    @dptr,A
                     350     ;inc            A
0125 A3              351     inc             dptr
0126 D8FC            352     djnz    r0,itera
0128 00              353     nop
0129 D9F9            354     djnz    r1,itera
012B 900FFF          355     mov             dptr,#0fffh
012E 7455            356     mov             A,#55h
0130 F0              357     movx    @DPTR,A
                     358     
                     359     ;-----------------------------------------------------------------------------
                     360     ; CODE SEGMENT
                     361     ;-----------------------------------------------------------------------------
                     362     ;------------------------------------------------------------------------------- 
                     363     ;main routine 
                     364     
                     365     
0131 D280            366     SETB p0.0 ;SPI pins must be high before set SPI mode 
0133 D281            367     SETB P0.1 ; they are after reset but let's be sure 
0135 D282            368     SETB P0.2; as per the atmel manual 
0137 D283            369     SETB P0.3 
                     370     
                     371     ;----------------------------------Initialize MultiMediaCard 
0139 757F00          372     MOV ADDR3,#0 
013C 757E00          373     MOV ADDR2,#0 
013F 757D00          374     MOV ADDR1,#0 
0142 757C00          375     MOV ADDR0,#0 
0145 315D            376     ACALL initmmc 
                     377     
0147 7C00            378     mov                     R4,#000h                        ;direcc MSB de BYTE a leer y/o escr
                             ibir
0149 7D00            379     mov                     R5,#000h                        ;
014B 7E00            380     mov                     R6,#000h                        ;
014D 7F00            381     mov                     R7,#000h                        ;direcc LSB de BYTE a leer y/o escr
                             ibir
014F 31E7            382     ACALL           read_sector
                     383     
0151 7C00            384     mov                     R4,#000h                        ;direcc MSB de BYTE a leer y/o escr
                             ibir
0153 7D00            385     mov                     R5,#000h                        ;
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     7

0155 7E00            386     mov                     R6,#000h                        ;
0157 7F00            387     mov                     R7,#000h                        ;direcc LSB de BYTE a leer y/o escr
                             ibir
0159 5148            388     ACALL           write_sector
                     389     
                     390     
015B                 391     esperar:
015B 80FE            392     sjmp            esperar
                     393     
                     394     ;------------------------------------------------------------------------------- 
                     395     ;----------------------------------Initialize MultiMediaCard 
015D                 396     initmmc: 
015D D283            397     SETB P0.3 ;Take CS* high 
015F 74FF            398     MOV A,#0FFh
0161 31AD            399     ACALL spiout 
0163 74FF            400     MOV A,#0FFH 
0165 31AD            401     ACALL spiout 
0167 74FF            402     MOV A,#0FFH 
0169 31AD            403     ACALL spiout 
016B 74FF            404     MOV A,#0FFH 
016D 31AD            405     ACALL spiout 
016F 74FF            406     MOV A,#0FFH 
0171 31AD            407     ACALL spiout 
0173 74FF            408     MOV A,#0FFH 
0175 31AD            409     ACALL spiout 
0177 74FF            410     MOV A,#0FFH 
0179 31AD            411     ACALL spiout 
017B 74FF            412     MOV A,#0FFH 
017D 31AD            413     ACALL spiout 
                     414     
017F C283            415     CLR P0.3 ;take CS* low to select card 
                     416     
0181 74FF            417     MOV A,#0FFH 
0183 31AD            418     ACALL spiout 
0185 74FF            419     MOV A,#0FFH 
0187 31AD            420     ACALL spiout 
                     421     
0189 7400            422     MOV A,#0 ;send CMD0 to enable SPI mode on MMC 
018B 31BC            423     ACALL cmd 
018D 74FF            424     MOV A,#0FFH ;enable the MMC to finish 
018F 31AD            425     ACALL spiout 
                     426     
0191                 427     notready: 
0191 7429            428     MOV A,#41d
0193 31BC            429     ACALL cmd 
                     430     
0195 B82906          431     CJNE R0,#41d,ready ;return if the MMC is ready 
0198 74FF            432     MOV A,#0FFH ;enable the MMC to finish 
019A 31AD            433     ACALL spiout 
019C 80F3            434     SJMP notready 
                     435     
019E                 436     ready: 
019E 74FF            437     MOV A,#0FFH ;enable the MMC to finish if we got here 
01A0 31AD            438     ACALL spiout 
                     439     
01A2 D283            440     SETB P0.3       
01A4 74FF            441     MOV                     A,#0FFh
01A6 31AD            442     ACALL           spiout
01A8 74FF            443     MOV                     A,#0FFh
01AA 31AD            444     ACALL           spiout
                     445     
01AC 22              446     RET 
                     447     
                     448     ;------------------------------------------------------------------------------- 
                     449     ;----------------------------------Send a byte from ACC to MOSI, result=R0 
01AD                 450     spiout: 
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     8

01AD F5A3            451     MOV SPI0DAT,A 
                     452     
01AF                 453     waitspi:
01AF E5F8            454     MOV A,SPI0CN ;read the status register 
01B1 5480            455     ANL A,#10000000b ;upper bit=1 when data is gone 
01B3 B480F9          456     CJNE A,#10000000b,waitspi ;if only bit 7 set, the data is gone 
01B6 53F87F          457     ANL     SPI0CN,#01111111b
                     458     
01B9 A8A3            459     MOV R0,SPI0DAT 
                     460     
01BB 22              461     RET 
                     462     
                     463     
                     464     ;------------------------------------------------------------------------------- 
                     465     ;----------------------------------Send a CMD to the MMC 
01BC                 466     cmd: 
01BC 4440            467     ORL A,#01000000b ;CMD's always have bit 7 set 
01BE 31AD            468     ACALL spiout ;send command byte 
01C0 E57F            469     MOV A,ADDR3 ;send 4 argument bytes 
01C2 31AD            470     ACALL spiout 
01C4 E57E            471     MOV A,ADDR2 
01C6 31AD            472     ACALL spiout 
01C8 E57D            473     MOV A,ADDR1 
01CA 31AD            474     ACALL spiout 
01CC E57C            475     MOV A,ADDR0 
01CE 31AD            476     ACALL spiout 
01D0 7495            477     MOV A,#95H ;checksum, 95H for CMD0, ignored for rest 
01D2 31AD            478     ACALL spiout 
                     479     
01D4 790B            480     MOV R1,#11 ;read up to 8 times for valid response 
01D6                 481     checkr: 
01D6 74FF            482     MOV A,#0FFH 
01D8 31AD            483     ACALL spiout 
01DA B8FF07          484     CJNE R0,#255d,response 
01DD D9F7            485     DJNZ R1,checkr 
                     486     
01DF 757801          487     MOV ERRORNUM,#1 ;didn't get a valid response, stop 
01E2 21E5            488     AJMP error 
                     489     
01E4                 490     response: ;can't check to see if good: cmd0/1 not 
01E4 22              491     RET 
                     492     
01E5                 493     error:
01E5 80FE            494     sjmp error
                     495     
                     496     ;------------------------------------------------------------------------------- 
                     497     ;------------------------LECTURA DE 1 SECTOR
01E7                 498     read_sector:
                     499     
01E7 74FF            500     MOV                     A,#0FFh
01E9 31AD            501     ACALL           spiout
                     502     
01EB C283            503     CLR                     P0.3                    ;Select card
                     504     
01ED 7451            505     MOV                     A,#51h                  ;envio comando 24 escritura bloque
01EF 31AD            506     ACALL           spiout
01F1 EC              507     MOV                     A,R4                    ;direccion MSB
01F2 31AD            508     ACALL           spiout
01F4 ED              509     MOV                     A,R5                    ;direccion
01F5 31AD            510     ACALL           spiout
01F7 EE              511     MOV                     A,R6                    ;direccion
01F8 31AD            512     ACALL           spiout
01FA EF              513     MOV                     A,R7                    ;direccion LSB
01FB 31AD            514     ACALL           spiout
01FD 7400            515     MOV                     A,#00h                  ;CRC
01FF 31AD            516     ACALL           spiout
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE     9

0201 74FF            517     MOV                     A,#0FFh                 ;NCR time
0203 31AD            518     ACALL           spiout
                     519     
0205 75F0FF          520     mov                     B,#0FFh
0208                 521     espera_token:
0208 74FF            522     MOV                     A,#0FFh                 ;respuesta de comando, deveria ser 00h
020A D5F002          523     DJNZ            B,espera_token2
                     524     
020D                 525     tiempo_fuera:
020D 80FE            526     sjmp            tiempo_fuera
                     527     
020F                 528     espera_token2:
020F 31AD            529     ACALL           spiout
0211 B8FEF4          530     CJNE            R0,#0FEh,espera_token
                     531     
0214                 532     lectura_correcta:
0214 80FE            533     sjmp            lectura_correcta
                     534     
                     535     
0216                 536     recibo_512:                                     ;envio 512 bytes
0216 7A00            537     mov             R2,#00h
0218 7B02            538     mov                     R3,#02h
021A 900000          539     mov             dptr,#0000h
021D                 540     itera_read:
021D E0              541     movx            A,@DPTR
021E 31AD            542     ACALL           spiout
0220 A3              543     inc                     DPTR
0221 DAFA            544     djnz            R2,itera_read
0223 DBF8            545     djnz            R3,itera_read
                     546     
0225 7400            547     MOV                     A,#00h                  ;CRC
0227 31AD            548     ACALL           spiout
0229 7400            549     MOV                     A,#00h                  ;CRC
022B 31AD            550     ACALL           spiout
022D 74FF            551     MOV                     A,#0FFh                 ;Lectura respuesta comando
022F 31AD            552     ACALL           spiout
                     553     
0231 74FF            554     MOV                     A,#0FFh                 ;nada
0233 31AD            555     ACALL           spiout
0235 74FF            556     MOV                     A,#0FFh                 ;nada
0237 31AD            557     ACALL           spiout
0239 74FF            558     MOV                     A,#0FFh                 ;nada
023B 31AD            559     ACALL           spiout
023D 74FF            560     MOV                     A,#0FFh                 ;nada
023F 31AD            561     ACALL           spiout
0241 74FF            562     MOV                     A,#0FFh                 ;nada
0243 31AD            563     ACALL           spiout
                     564     
                     565     
0245 D283            566     SETB            P0.3                            ;Deselecciono Memoria
                     567     
0247 22              568     RET
                     569     
                     570     ;------------------------------------------------------------------------------- 
                     571     ;------------------------ESCRITURA DE 1 SECTOR
                     572     
0248                 573     write_sector:
                     574     
0248 74FF            575     MOV                     A,#0FFh
024A 31AD            576     ACALL           spiout
                     577     
024C C283            578     CLR                     P0.3                    ;Select card
                     579     
024E 7458            580     MOV                     A,#58h                  ;envio comando 24 escritura bloque
0250 31AD            581     ACALL           spiout
0252 EC              582     MOV                     A,R4                    ;direccion MSB
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE    10

0253 31AD            583     ACALL           spiout
0255 ED              584     MOV                     A,R5                    ;direccion
0256 31AD            585     ACALL           spiout
0258 EE              586     MOV                     A,R6                    ;direccion
0259 31AD            587     ACALL           spiout
025B EF              588     MOV                     A,R7                    ;direccion LSB
025C 31AD            589     ACALL           spiout
025E 7400            590     MOV                     A,#00h                  ;CRC
0260 31AD            591     ACALL           spiout
0262 74FF            592     MOV                     A,#0FFh                 ;NCR time
0264 31AD            593     ACALL           spiout
0266 74FF            594     MOV                     A,#0FFh                 ;respuesta de comando, deveria ser 00h
0268 31AD            595     ACALL           spiout
026A 74FF            596     MOV                     A,#0FFh                 ;byte espacio
026C 31AD            597     ACALL           spiout
026E 74FE            598     MOV                     A,#0FEh                 ;Data token
0270 31AD            599     ACALL           spiout
                     600     
                     601     
0272                 602     envio_512:                                      ;envio 512 bytes
0272 7A00            603     mov             R2,#00h
0274 7B02            604     mov                     R3,#02h
0276 900000          605     mov             dptr,#0000h
0279                 606     itera2:
0279 E0              607     movx            A,@DPTR
027A 31AD            608     ACALL           spiout
027C A3              609     inc                     DPTR
027D DAFA            610     djnz            R2,itera2
027F DBF8            611     djnz            R3,itera2
                     612     
0281 7400            613     MOV                     A,#00h                  ;CRC
0283 31AD            614     ACALL           spiout
0285 7400            615     MOV                     A,#00h                  ;CRC
0287 31AD            616     ACALL           spiout
0289 74FF            617     MOV                     A,#0FFh                 ;Lectura respuesta comando
028B 31AD            618     ACALL           spiout
                     619     
028D 74FF            620     MOV                     A,#0FFh                 ;nada
028F 31AD            621     ACALL           spiout
0291 74FF            622     MOV                     A,#0FFh                 ;nada
0293 31AD            623     ACALL           spiout
0295 74FF            624     MOV                     A,#0FFh                 ;nada
0297 31AD            625     ACALL           spiout
0299 74FF            626     MOV                     A,#0FFh                 ;nada
029B 31AD            627     ACALL           spiout
029D 74FF            628     MOV                     A,#0FFh                 ;nada
029F 31AD            629     ACALL           spiout
                     630     
                     631     
02A1 D283            632     SETB            P0.3                            ;Deselecciono Memoria
                     633     
02A3 22              634     RET
                     635     
                     636     
                     637     
                     638     
                     639     ;-------------------------------------------------------------------------------
                     640     END
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE    11

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AC . . . . . . . .  B ADDR   00D0H.6 A      221#
ACC. . . . . . . .  D ADDR   00E0H   A      122#
ACK. . . . . . . .  B ADDR   00C0H.1 A      206#
ACKRQ. . . . . . .  B ADDR   00C0H.3 A      204#
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      243#
AD0CM0 . . . . . .  B ADDR   00E8H.0 A      247#
AD0CM1 . . . . . .  B ADDR   00E8H.1 A      246#
AD0CM2 . . . . . .  B ADDR   00E8H.2 A      245#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      240#
AD0INT . . . . . .  B ADDR   00E8H.5 A      242#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      241#
AD0WINT. . . . . .  B ADDR   00E8H.3 A      244#
ADC0CF . . . . . .  D ADDR   00BCH   A      89#
ADC0CN . . . . . .  D ADDR   00E8H   A      130# 240 241 242 243 244 245 246 247
ADC0GTH. . . . . .  D ADDR   00C4H   A      96#
ADC0GTL. . . . . .  D ADDR   00C3H   A      95#
ADC0H. . . . . . .  D ADDR   00BEH   A      91#
ADC0L. . . . . . .  D ADDR   00BDH   A      90#
ADC0LTH. . . . . .  D ADDR   00C6H   A      98#
ADC0LTL. . . . . .  D ADDR   00C5H   A      97#
ADDR0. . . . . . .  N NUMB   007CH   A      337# 375 475
ADDR1. . . . . . .  N NUMB   007DH   A      338# 374 473
ADDR2. . . . . . .  N NUMB   007EH   A      339# 373 471
ADDR3. . . . . . .  N NUMB   007FH   A      340# 372 469
AMX0N. . . . . . .  D ADDR   00BAH   A      87#
AMX0P. . . . . . .  D ADDR   00BBH   A      88#
ARBLOST. . . . . .  B ADDR   00C0H.2 A      205#
B. . . . . . . . .  D ADDR   00F0H   A      138# 520 523
CCF0 . . . . . . .  B ADDR   00D8H.0 A      237#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      236#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      235#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      234#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      233#
CF . . . . . . . .  B ADDR   00D8H.7 A      230#
CHECKR . . . . . .  C ADDR   01D6H   A      481# 485
CKCON. . . . . . .  D ADDR   008EH   A      45#
CLKMUL . . . . . .  D ADDR   00B9H   A      86#
CLKSEL . . . . . .  D ADDR   00A9H   A      72#
CMD. . . . . . . .  C ADDR   01BCH   A      423 429 466#
CPT0CN . . . . . .  D ADDR   009BH   A      58#
CPT0MD . . . . . .  D ADDR   009DH   A      60#
CPT0MX . . . . . .  D ADDR   009FH   A      62#
CPT1CN . . . . . .  D ADDR   009AH   A      57#
CPT1MD . . . . . .  D ADDR   009CH   A      59#
CPT1MX . . . . . .  D ADDR   009EH   A      61#
CR . . . . . . . .  B ADDR   00D8H.6 A      231#
CY . . . . . . . .  B ADDR   00D0H.7 A      220#
DPH. . . . . . . .  D ADDR   0083H   A      34#
DPL. . . . . . . .  D ADDR   0082H   A      33#
EA . . . . . . . .  B ADDR   00A8H.7 A      180#
EIE1 . . . . . . .  D ADDR   00E6H   A      128#
EIE2 . . . . . . .  D ADDR   00E7H   A      129#
EIP1 . . . . . . .  D ADDR   00F6H   A      144#
EIP2 . . . . . . .  D ADDR   00F7H   A      145#
EMI0CF . . . . . .  D ADDR   0085H   A      36#
EMI0CN . . . . . .  D ADDR   00AAH   A      73#
EMI0TC . . . . . .  D ADDR   0084H   A      35#
ENVIO_512. . . . .  C ADDR   0272H   A      602#
ERROR. . . . . . .  C ADDR   01E5H   A      488 493# 494
ERRORNUM . . . . .  N NUMB   0078H   A      341# 487
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE    12

ES0. . . . . . . .  B ADDR   00A8H.4 A      183#
ESPERAR. . . . . .  C ADDR   015BH   A      391# 392
ESPERA_TOKEN . . .  C ADDR   0208H   A      521# 530
ESPERA_TOKEN2. . .  C ADDR   020FH   A      523 528#
ESPI0. . . . . . .  B ADDR   00A8H.6 A      181#
ET0. . . . . . . .  B ADDR   00A8H.1 A      186#
ET1. . . . . . . .  B ADDR   00A8H.3 A      184#
ET2. . . . . . . .  B ADDR   00A8H.5 A      182#
EX0. . . . . . . .  B ADDR   00A8H.0 A      187#
EX1. . . . . . . .  B ADDR   00A8H.2 A      185#
F0 . . . . . . . .  B ADDR   00D0H.5 A      222#
F1 . . . . . . . .  B ADDR   00D0H.1 A      226#
FLKEY. . . . . . .  D ADDR   00B7H   A      84#
FLSCL. . . . . . .  D ADDR   00B6H   A      83#
IE . . . . . . . .  D ADDR   00A8H   A      71# 180 181 182 183 184 185 186 187
IE0. . . . . . . .  B ADDR   0088H.1 A      166#
IE1. . . . . . . .  B ADDR   0088H.3 A      164#
INICIO . . . . . .  C ADDR   0100H   A      265 273#
INITMMC. . . . . .  C ADDR   015DH   A      376 396#
IP . . . . . . . .  D ADDR   00B8H   A      85# 191 192 193 194 195 196 197
IT0. . . . . . . .  B ADDR   0088H.0 A      167#
IT01CF . . . . . .  D ADDR   00E4H   A      126#
IT1. . . . . . . .  B ADDR   0088H.2 A      165#
ITERA. . . . . . .  C ADDR   0124H   A      348# 352 354
ITERA2 . . . . . .  C ADDR   0279H   A      606# 610 611
ITERA_READ . . . .  C ADDR   021DH   A      540# 544 545
LECTURA_CORRECTA .  C ADDR   0214H   A      532# 533
MASTER . . . . . .  B ADDR   00C0H.7 A      200#
MCE0 . . . . . . .  B ADDR   0098H.5 A      172#
MODF . . . . . . .  B ADDR   00F8H.5 A      252#
NOTREADY . . . . .  C ADDR   0191H   A      427# 434
NSSMD0 . . . . . .  B ADDR   00F8H.2 A      255#
NSSMD1 . . . . . .  B ADDR   00F8H.3 A      254#
OSCICL . . . . . .  D ADDR   00B3H   A      80#
OSCICN . . . . . .  D ADDR   00B2H   A      79# 323
OSCILLATOR_INIT. .  C ADDR   0112H   A      322#
OSCLCN . . . . . .  D ADDR   0086H   A      37#
OSCXCN . . . . . .  D ADDR   00B1H   A      78#
OV . . . . . . . .  B ADDR   00D0H.2 A      225#
P. . . . . . . . .  B ADDR   00D0H.0 A      227#
P0 . . . . . . . .  D ADDR   0080H   A      31# 366 367 368 369 397 415 440 503 566 578 632
P0MDIN . . . . . .  D ADDR   00F1H   A      139#
P0MDOUT. . . . . .  D ADDR   00A4H   A      67# 317
P0SKIP . . . . . .  D ADDR   00D4H   A      110#
P1 . . . . . . . .  D ADDR   0090H   A      47#
P1MDIN . . . . . .  D ADDR   00F2H   A      140#
P1MDOUT. . . . . .  D ADDR   00A5H   A      68#
P1SKIP . . . . . .  D ADDR   00D5H   A      111#
P2 . . . . . . . .  D ADDR   00A0H   A      63#
P2MDIN . . . . . .  D ADDR   00F3H   A      141#
P2MDOUT. . . . . .  D ADDR   00A6H   A      69#
P2SKIP . . . . . .  D ADDR   00D6H   A      112#
P3 . . . . . . . .  D ADDR   00B0H   A      77#
P3MDIN . . . . . .  D ADDR   00F4H   A      142#
P3MDOUT. . . . . .  D ADDR   00A7H   A      70#
P3SKIP . . . . . .  D ADDR   00DFH   A      121#
P4 . . . . . . . .  D ADDR   00C7H   A      99#
P4MDIN . . . . . .  D ADDR   00F5H   A      143#
P4MDOUT. . . . . .  D ADDR   00AEH   A      75#
PCA0CN . . . . . .  D ADDR   00D8H   A      114# 230 231 233 234 235 236 237
PCA0CPH0 . . . . .  D ADDR   00FCH   A      150#
PCA0CPH1 . . . . .  D ADDR   00EAH   A      132#
PCA0CPH2 . . . . .  D ADDR   00ECH   A      134#
PCA0CPH3 . . . . .  D ADDR   00EEH   A      136#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      152#
PCA0CPL0 . . . . .  D ADDR   00FBH   A      149#
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE    13

PCA0CPL1 . . . . .  D ADDR   00E9H   A      131#
PCA0CPL2 . . . . .  D ADDR   00EBH   A      133#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      135#
PCA0CPL4 . . . . .  D ADDR   00FDH   A      151#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      116#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      117#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      118#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      119#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      120#
PCA0H. . . . . . .  D ADDR   00FAH   A      148#
PCA0L. . . . . . .  D ADDR   00F9H   A      147#
PCA0MD . . . . . .  D ADDR   00D9H   A      115# 326 327
PCA_INIT . . . . .  C ADDR   0115H   A      325#
PCON . . . . . . .  D ADDR   0087H   A      38#
PFE0CN . . . . . .  D ADDR   00AFH   A      76#
PS0. . . . . . . .  B ADDR   00B8H.4 A      193#
PSCTL. . . . . . .  D ADDR   008FH   A      46#
PSPI0. . . . . . .  B ADDR   00B8H.6 A      191#
PSW. . . . . . . .  D ADDR   00D0H   A      106# 220 221 222 223 224 225 226 227
PT0. . . . . . . .  B ADDR   00B8H.1 A      196#
PT1. . . . . . . .  B ADDR   00B8H.3 A      194#
PT2. . . . . . . .  B ADDR   00B8H.5 A      192#
PX0. . . . . . . .  B ADDR   00B8H.0 A      197#
PX1. . . . . . . .  B ADDR   00B8H.2 A      195#
RB80 . . . . . . .  B ADDR   0098H.2 A      175#
READY. . . . . . .  C ADDR   019EH   A      431 436#
READ_SECTOR. . . .  C ADDR   01E7H   A      382 498#
RECIBO_512 . . . .  C ADDR   0216H   A      536#
REF0CN . . . . . .  D ADDR   00D1H   A      107#
REG0CN . . . . . .  D ADDR   00C9H   A      101#
REN0 . . . . . . .  B ADDR   0098H.4 A      173#
RESPONSE . . . . .  C ADDR   01E4H   A      484 490#
RI0. . . . . . . .  B ADDR   0098H.0 A      177#
RS0. . . . . . . .  B ADDR   00D0H.3 A      224#
RS1. . . . . . . .  B ADDR   00D0H.4 A      223#
RSTSRC . . . . . .  D ADDR   00EFH   A      137#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      253#
S0MODE . . . . . .  B ADDR   0098H.7 A      170#
SBCON1 . . . . . .  D ADDR   00ACH   A      74#
SBRLH1 . . . . . .  D ADDR   00B5H   A      82#
SBRLL1 . . . . . .  D ADDR   00B4H   A      81#
SBUF0. . . . . . .  D ADDR   0099H   A      56#
SBUF1. . . . . . .  D ADDR   00D3H   A      109#
SCON0. . . . . . .  D ADDR   0098H   A      55# 170 172 173 174 175 176 177
SCON1. . . . . . .  D ADDR   00D2H   A      108#
SI . . . . . . . .  B ADDR   00C0H.0 A      207#
SMB0CF . . . . . .  D ADDR   00C1H   A      93#
SMB0CN . . . . . .  D ADDR   00C0H   A      92# 200 201 202 203 204 205 206 207
SMB0DAT. . . . . .  D ADDR   00C2H   A      94#
SMOD1. . . . . . .  D ADDR   00E5H   A      127#
SP . . . . . . . .  D ADDR   0081H   A      32#
SPI0CFG. . . . . .  D ADDR   00A1H   A      64# 275
SPI0CKR. . . . . .  D ADDR   00A2H   A      65# 277
SPI0CN . . . . . .  D ADDR   00F8H   A      146# 250 251 252 253 254 255 256 257 276 454 457
SPI0DAT. . . . . .  D ADDR   00A3H   A      66# 451 459
SPIEN. . . . . . .  B ADDR   00F8H.0 A      257#
SPIF . . . . . . .  B ADDR   00F8H.7 A      250#
SPIOUT . . . . . .  C ADDR   01ADH   A      399 401 403 405 407 409 411 413 418 420 425 433 438 442 444 450# 468 470
                                           472 474 476 478 483 501 506 508 510 512 514 516 518 529 542 548 550 552
                                           555 557 559 561 563 576 581 583 585 587 589 591 593 595 597 599 608 614
                                           616 618 621 623 625 627 629
SPI_INIT . . . . .  C ADDR   0100H   A      274#
STA. . . . . . . .  B ADDR   00C0H.5 A      202#
STO. . . . . . . .  B ADDR   00C0H.4 A      203#
T2CE . . . . . . .  B ADDR   00C8H.4 A      213#
T2CSS. . . . . . .  B ADDR   00C8H.1 A      216#
A51 MACRO ASSEMBLER  MEM_SD                                                               09/08/2007 16:56:20 PAGE    14

T2SPLIT. . . . . .  B ADDR   00C8H.3 A      214#
T2XCLK . . . . . .  B ADDR   00C8H.0 A      217#
TB80 . . . . . . .  B ADDR   0098H.3 A      174#
TCON . . . . . . .  D ADDR   0088H   A      39# 160 161 162 163 164 165 166 167
TF0. . . . . . . .  B ADDR   0088H.5 A      162#
TF1. . . . . . . .  B ADDR   0088H.7 A      160#
TF2H . . . . . . .  B ADDR   00C8H.7 A      210#
TF2L . . . . . . .  B ADDR   00C8H.6 A      211#
TF2LEN . . . . . .  B ADDR   00C8H.5 A      212#
TH0. . . . . . . .  D ADDR   008CH   A      43#
TH1. . . . . . . .  D ADDR   008DH   A      44#
TI0. . . . . . . .  B ADDR   0098H.1 A      176#
TIEMPO_FUERA . . .  C ADDR   020DH   A      525# 526
TL0. . . . . . . .  D ADDR   008AH   A      41#
TL1. . . . . . . .  D ADDR   008BH   A      42#
TMOD . . . . . . .  D ADDR   0089H   A      40#
TMR2CN . . . . . .  D ADDR   00C8H   A      100# 210 211 212 213 214 215 216 217
TMR2H. . . . . . .  D ADDR   00CDH   A      105#
TMR2L. . . . . . .  D ADDR   00CCH   A      104#
TMR2RLH. . . . . .  D ADDR   00CBH   A      103#
TMR2RLL. . . . . .  D ADDR   00CAH   A      102#
TMR3CN . . . . . .  D ADDR   0091H   A      48#
TMR3H. . . . . . .  D ADDR   0095H   A      52#
TMR3L. . . . . . .  D ADDR   0094H   A      51#
TMR3RLH. . . . . .  D ADDR   0093H   A      50#
TMR3RLL. . . . . .  D ADDR   0092H   A      49#
TR0. . . . . . . .  B ADDR   0088H.4 A      163#
TR1. . . . . . . .  B ADDR   0088H.6 A      161#
TR2. . . . . . . .  B ADDR   00C8H.2 A      215#
TXBMT. . . . . . .  B ADDR   00F8H.1 A      256#
TXMODE . . . . . .  B ADDR   00C0H.6 A      201#
USB0ADR. . . . . .  D ADDR   0096H   A      53#
USB0DAT. . . . . .  D ADDR   0097H   A      54#
USB0XCN. . . . . .  D ADDR   00D7H   A      113#
VDM0CN . . . . . .  D ADDR   00FFH   A      153#
WAITSPI. . . . . .  C ADDR   01AFH   A      453# 456
WCOL . . . . . . .  B ADDR   00F8H.6 A      251#
WRITE_SECTOR . . .  C ADDR   0248H   A      388 573#
XBR0 . . . . . . .  D ADDR   00E1H   A      123# 318
XBR1 . . . . . . .  D ADDR   00E2H   A      124# 319
XBR2 . . . . . . .  D ADDR   00E3H   A      125#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
